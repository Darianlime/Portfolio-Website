<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="../styles.css">
  <title>Darian Li - 2D Multiplayer Racing Game</title>

  <style>
    .project-page {
      padding: 120px 20px 60px 20px;
      max-width: 900px;
      margin: 0 auto;
      text-align: center;
    }

    .project-page h1 {
      font-size: 42px;
      margin-bottom: 10px;
    }

    .project-subtitle {
      font-size: 18px;
      margin-bottom: 40px;
      opacity: 0.8;
    }

    .project-preview img,
    .project-page video {
      width: 100%;
      max-width: 700px;
      border-radius: 8px;
      margin-bottom: 40px;
    }

    .project-section {
      margin-bottom: 60px;
      text-align: left;
    }

    .project-section h2 {
      font-size: 28px;
      margin-bottom: 15px;
    }

    .project-section p {
      font-size: 17px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .project-section ul {
      padding-left: 25px;
    }

    .project-section li {
      margin-bottom: 10px;
      font-size: 17px;
    }

    .gif-grid {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .gif-card {
      width: 280px;
      background: white;
      padding: 15px;
      border: 1.5px solid #d3d3d3;
      border-radius: 8px;
      text-align: center;
      transition: 0.2s ease-in-out;
    }

    .gif-card:hover {
      transform: translateY(-5px);
      box-shadow: 0px 4px 12px rgba(0,0,0,0.15);
    }

    .gif-card img {
      width: 100%;
      border-radius: 4px;
      margin-bottom: 10px;
    }

    .gif-card h3 {
      font-size: 22px;
      margin-bottom: 10px;
    }

    .gif-card p {
      font-size: 14px;
      opacity: 0.8;
    }

    .back-link {
      display: inline-block;
      margin-top: 40px;
      font-size: 18px;
      padding: 10px 18px;
      border: 2px solid black;
      border-radius: 6px;
      transition: 0.15s;
    }

    .back-link:hover {
      background: black;
      color: white;
    }
  </style>
</head>

<body>

  <nav id="navbar">
    <div class="left">
      <a href="/">Darian Li</a>
    </div>

    <div class="right">
      <a href="https://github.com/Darianlime" target="_blank" rel="noopener noreferrer">
        <i class="fa-brands fa-github"></i>
        <span>Github</span>
      </a>

      <a href="https://www.linkedin.com/in/darian-li-6440672b2/" target="_blank" rel="noopener noreferrer">
        <i class="fa-brands fa-linkedin"></i>
        <span>Linkedin</span>
      </a>

      <!-- <a href="darianli447@gmail.com">
        <i class="fa-solid fa-envelope"></i>
        <span>Resume</span>
      </a> -->
    </div>
  </nav>

  <div class="project-page">
    <h1>2D Multiplayer Racing Game (WIP)</h1>
    <p class="project-subtitle">
      Real-time racing game built from scratch in C++17 using OpenGL & ENet  
      <br>Authoritative server • Custom physics • Client-side prediction
    </p>

    <div class="project-preview">
      <video class="img" controls playsinline>
        <source src="../videos/CarGameShowcase.mp4" type="video/mp4">
      </video>
    </div>

    <div class="project-section">
      <h2>Overview</h2>
      <p>
        This is a real-time multiplayer racing game developed from the ground up in C++ using modern OpenGL and ENet. 
        The project is designed to explore real-time physics simulation, client/server networking, custom rendering pipelines, 
        and techniques used in competitive online games such as prediction, reconciliation, and snapshot interpolation.
      </p>
      <ul>
        <li>Developed a fully authoritative server running car physics and collision detection at <strong>64 Hz</strong>.</li>
        <li>Implemented <strong>client-side prediction</strong>, <strong>server reconciliation</strong>, and tick-based input replay.</li>
        <li>Added a dedicated <strong>networking thread</strong> to asynchronously process ENet packets without blocking the main thread.</li>
        <li>Built real-time <strong>snapshot interpolation</strong> and smoothing to handle jitter and packet delay.</li>
        <li>Designed reliable & unreliable packet channels for state sync, collisions, and inputs.</li>
        <li>Created a lightweight reusable engine library (physics, rendering, math, networking, collision utilities).</li>
      </ul>
    </div>
  <div class="project-section">
  <h2>Networking Comparison</h2>
  <p>
    This section demonstrates how networking features improve gameplay responsiveness and smoothness.
     <strong>(Note: Client and Server is running on 10 hz and a higher ping for showcasing)</strong>
  </p>

  <div class="gif-grid">

    <div class="gif-card">
      <h3>No Prediction / Reconciliation</h3>
      <video class="img" autoplay loop muted controls playsinline>
        <source src="../videos/NoPredictAndRec.mp4" type="video/mp4">
      </video>
      <p>Client waits for server updates. High input delay, visible stutter, and rubber-banding.</p>
    </div>

    <div class="gif-card">
      <h3>Prediction Only</h3>
      <video class="img" autoplay loop muted controls playsinline>
        <source src="../videos/NewPredOnlyEdited.mp4" type="video/mp4">
      </video>
      <p>Instant input response, but corrections cause snapping without reconciliation.</p>
    </div>

    <div class="gif-card">
      <h3>Prediction + Reconciliation</h3>
      <video class="img" autoplay loop muted controls playsinline>
        <source src="../videos/NewPredAndRec.mp4" type="video/mp4">
      </video>
      <p>Replays unacknowledged inputs on correction, removing snapping while staying responsive.</p>
    </div>

    <div class="gif-card">
      <h3>No Interpolation</h3>
      <video class="img" autoplay loop muted controls playsinline>
        <source src="../videos/NoInterpolationEdited.mp4" type="video/mp4">
      </video>
      <p>Remote players jitter and does not have smoothing.</p>
    </div>

  </div>  

    <div class="project-section">
      <h2>Challenges & Solutions</h2>
      <p><strong>Jittery remote cars:</strong> Network delay caused stuttering when rendering other players.</p>
      <p>→ Solved using snapshot buffering, interpolation windows, and position/rotation-based smoothing.</p>

      <p><strong>Desync during high latency:</strong> Clients drifted from server state.</p>
      <p>→ Implemented input history rewind with tick-based replay for deterministic correction.</p>

      <p><strong>Collision jitter on remote clients:</strong> Collisions with other players caused local jitter but appeared inconsistent on remote clients.</p>
      <p>→ Added collision reconciliation for remote clients, ensuring collisions interpolate correctly on screen.</p>

      <p><strong>Collision checks being O(n<sup>2</sup>):</strong>  Caused high latency when many clients were connected.</p>
      <p>→ Implemented a tile-based spatial partitioning system that queries only surrounding tiles and pools nearby vertices, reducing collision complexity to <strong>O(n · k)</strong> (near-linear in practice).</p>
    </div>

    <div class="project-section">
      <h2>Source Code</h2>
      <p>
        <a href="https://github.com/Darianlime/RacingMultiplayerGame" target="_blank" class="back-link">View Source Code</a>
      </p>
      <a href="../index.html" class="back-link">← Back to Portfolio</a>
    </div>

  </div>

  <script>
    document.addEventListener('scroll', () => {
      const header = document.querySelector('nav');
      if (window.scrollY > 0) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    })
  </script>

</body>
</html>
